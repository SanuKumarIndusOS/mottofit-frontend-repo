(this.webpackJsonpmotto=this.webpackJsonpmotto||[]).push([[136,142,161,370,371,372,464],{295:function(e,t,s){"use strict";s.r(t),s.d(t,"ChatItem",(function(){return l}));var n=s(4),a=(s(2),s(242)),c=s.n(a),i=(s(433),s(43)),r=s(1),l=function(e){var t,s=e.currentChannelMembers,a=void 0===s?[]:s,l=e.currMsg,o=l.type,d=l.state,m=l.date;if("message"===o){var h=c()(d.timestamp).format("LT"),u=(null===d||void 0===d?void 0:d.author)===localStorage.getItem("user-id"),g=a.filter((function(e){return e.userIdenity===d.author}))[0]||{};t=Object(r.jsxs)("div",{className:"message_chat_".concat(u?"right":"left"),children:[Object(r.jsxs)("div",{className:"message_text",children:[Object(r.jsx)("h5",{children:(null===d||void 0===d?void 0:d.body)||""}),Object(r.jsx)("span",{className:"msg-time",children:h})]}),Object(r.jsx)(i.UserAvatar,Object(n.a)({},g))]})}else t=Object(r.jsx)("div",{className:"w-100 d-flex align-items-center justify-content-center my-3",children:Object(r.jsx)("span",{className:"info-badge",children:m})});return Object(r.jsx)("div",{children:t})}},297:function(e,t,s){"use strict";s.r(t);var n=s(4),a=s(92),c=s(19),i=s(20),r=s(25),l=s(24),o=s(2),d=s.n(o),m=s(430),h=s(449),u=s(427),g=s(57),j=s(295),b=s(23),v=s(66),f=s(46),O=s(27),x=s(93),p=s(1),M=function(e){Object(r.a)(s,e);var t=Object(l.a)(s);function s(e){var i;return Object(c.a)(this,s),(i=t.call(this,e)).scrollToMessageListBottom=function(){var e,t;null===(e=i.messagesEndRef.current)||void 0===e||e.scrollTo(0,null===(t=i.messagesEndRef.current)||void 0===t?void 0:t.scrollHeight)},i.handleChange=function(e){var t=e.target.value,s=i.props.activeChannel;i.setState({message:t}),s&&s.typing()},i.handleSendMessage=function(e){e.preventDefault();var t=i.state.message,s=i.props.activeChannel;if(!s)return console.log("Chat Service is not configured.");s&&s.sendMessage(String(t)).then((function(){i.setState({message:""}),i.scrollToMessageListBottom()}))},i.formatMessage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="",s=e.reduce((function(e,s){var c=Object(a.a)(e),i=s.state.timestamp,r=Object(x.getFormatDate)(null,"YYYY"),l=Object(x.getFormatDate)(i,"YYYY"),o=Object(x.getFormatDate)(i,"MMMM DD"),d=r===l?o:"".concat(o,", ").concat(l);return t===d?c=[].concat(Object(a.a)(c),[Object(n.a)({type:"message"},s)]):(t=d,c=[].concat(Object(a.a)(c),[{type:"timestamp",date:d},Object(n.a)({type:"message"},s)])),c}),[]);return s},i.unread=function(){var e=[];i.setState({members:i.props.currentChannelMembers},(function(){var t=i.state.members.filter((function(e){return e.memberIdenity!==localStorage.getItem("user-id")}));e=t.map((function(e){return e.userId})),i.props.send_unread_notification({recepients:e})}))},i.messagesEndRef=d.a.createRef(),i.state={message:"",members:[]},i}return Object(i.a)(s,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.activeChannelMessages.length!==e.activeChannelMessages.length&&this.scrollToMessageListBottom(),!1===this.props.isLoading&&!0===e.isLoading&&setTimeout((function(){t.scrollToMessageListBottom()}),100)}},{key:"componentDidMount",value:function(){this.scrollToMessageListBottom()}},{key:"render",value:function(){var e=this.props,t=e.activeChannelMessages,s=void 0===t?[]:t,n=e.typingMembers,a=void 0===n?[]:n,c=e.currentChannelMembers,i=void 0===c?[]:c,r=e.isLoading,l=void 0!==r&&r,o=e.activeChannel,d=void 0===o?{}:o,b=e.channelData,v=void 0===b?{}:b,f=e.isDataPresent,O=void 0!==f&&f,M=this.state.message,N=this.formatMessage(s);return O?Object(p.jsx)("div",{className:"message_right_chatarea",children:(null===d||void 0===d?void 0:d.sid)?Object(p.jsx)(p.Fragment,{children:l?Object(p.jsx)("div",{className:"w-100 h-100 d-flex align-items-center justify-content-center",children:Object(p.jsx)("span",{className:"info-badge",children:"".concat(l?"Loading...":"Connecting...")})}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"message_right_header",children:[Object(p.jsx)("h2",{children:(null===v||void 0===v?void 0:v.chatTitle)||"Title"}),Object(p.jsxs)("div",{className:"message_header_times",children:[Object(p.jsxs)("div",{className:"message_header_items",children:[Object(p.jsx)("img",{src:h.default,alt:"icon"}),Object(p.jsx)("h5",{children:Object(x.getFormatDate)(null===v||void 0===v?void 0:v.startTime,"ddd MMM DD YYYY",!0)})]}),Object(p.jsxs)("div",{className:"message_header_items",children:[Object(p.jsx)("img",{src:u.default,alt:"icon"}),Object(p.jsx)("h5",{children:Object(x.getFormatDate)(null===v||void 0===v?void 0:v.startTime,"hh:mm A",!0)})]}),Object(p.jsxs)("div",{className:"message_header_items",children:[Object(p.jsx)("img",{src:m.default,alt:"icon"}),Object(p.jsx)("h5",{children:null===v||void 0===v?void 0:v.venue})]})]}),Object(p.jsx)("p",{children:a.length>0&&Object(p.jsx)("span",{className:"ml-auto text-primary fw-600",children:"".concat(a.toString()," ").concat(a.length>1?"are":"is"," typing...")})})]}),Object(p.jsxs)("div",{className:"message_right_textarea",ref:this.messagesEndRef,children:[(null===N||void 0===N?void 0:N.length)>0?N.map((function(e,t){return Object(p.jsx)(j.ChatItem,{item:e,currentChannelMembers:i,currMsg:e},"".concat(Date.now(),"_").concat(t))})):Object(p.jsx)("div",{className:"w-100 h-100 d-flex align-items-center justify-content-center",children:Object(p.jsx)("span",{className:"info-badge",children:"No message"})}),Object(p.jsx)("div",{id:"end-message"})]}),Object(p.jsx)("form",{className:"w-100",onSubmit:this.handleSendMessage,children:Object(p.jsxs)("div",{className:"message_right_input",children:[Object(p.jsx)("input",{type:"text",placeholder:"Type your message here..",value:M,onChange:this.handleChange}),Object(p.jsx)("div",{className:"submit-btn-block",onClick:this.unread,children:Object(p.jsx)("button",{className:"transparent-btn",children:Object(p.jsx)(g.default,{})})})]})})]})}):Object(p.jsx)("div",{className:"w-100 h-100 d-flex align-items-center justify-content-center",children:Object(p.jsx)("span",{className:"info-badge",children:"".concat(l?"Loading...":"Select a chat to start messaging")})})}):Object(p.jsx)("div",{className:"w-100 h-100 d-flex align-items-center justify-content-center",children:l?"":Object(p.jsx)("h3",{children:"No New Messages"})})}}]),s}(o.Component),N=Object(O.b)((function(e){return{clientData:e.messagingReducer.clientData,activeChannel:e.messagingReducer.activeChannel,activeChannelMessages:e.messagingReducer.activeChannelMessages,typingMembers:e.messagingReducer.typingMembers,chatClientInstance:e.messagingReducer.chatClientInstance,currentChannelMembers:e.messagingReducer.currentChannelMembers,isLoading:e.messagingReducer.isLoading,channelData:e.messagingReducer.channelData}}),(function(e){return Object(b.b)({trainerChannel:v.trainerChannel,send_unread_notification:f.send_unread_notification},e)}))(M);t.default=N},325:function(e,t,s){"use strict";s.r(t),s.d(t,"MessageComponent",(function(){return o}));var n=s(4),a=(s(2),s(297)),c=s(67),i=s(93),r=s(43),l=s(1),o=function(e){var t=e.isMessageListLoading,s=e.messageData,o=void 0===s?[]:s,d=e.PopulateContacts,m=void 0===d?function(){}:d;return Object(l.jsxs)("div",{className:"message_inner_one",children:[Object(l.jsx)("div",{className:"message_left",children:t?Object(l.jsx)(c.CommonPageLoader,{}):o.map((function(e,t){var s,a=e.message||{},c=a.from,o=a.body,d=a.date_updated,h=(null===(s=e.members)||void 0===s?void 0:s.filter((function(e){return e.userId===c}))[0])||e.members[0]||{};return Object(l.jsx)("div",{className:"contact_item",children:Object(l.jsxs)("div",{className:"inner_link",children:[Object(l.jsx)(r.UserAvatar,Object(n.a)(Object(n.a)({},h),{},{className:"img-md-2"})),Object(l.jsxs)("div",{className:"message_link_notify",onClick:function(){return m(e.channelUniqueName,e.members,e)},children:[Object(l.jsxs)("div",{style:{display:"flex"},children:[Object(l.jsx)("h3",{children:e.chatTitle||""}),Object(l.jsxs)("h3",{children:["\u2002",e.members.length>2?"+  "+(e.members.length-2):null]})]}),Object(l.jsxs)("div",{children:[o&&Object(l.jsx)("p",{children:"".concat(null===o||void 0===o?void 0:o.slice(0,100)).concat((null===o||void 0===o?void 0:o.length)>100?"...":"")}),d&&Object(l.jsx)("span",{className:"msg-timestamp-left",children:Object(i.getFormatDate)(d,"LT")})]})]})]})},"".concat(Date.now(),"_").concat(t))}))}),Object(l.jsx)("div",{className:"message_right",children:Object(l.jsx)(a.default,{isDataPresent:o.length>0})})]})}},427:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/Availability Icon.ad0517cb.svg"},430:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/Location Icon.cbb0b32d.svg"},433:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/Image 1.5667afc3.png"},449:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/Shedule Icon.7b9fb7aa.svg"}}]);