{"version":3,"sources":["component/common/CommonPageLoader/index.js","component/TrainerDashBoard/DashboardCompontents/TrainerMessages/index.js","action/messagingAct.js","component/common/Message/ChatItem.js","helpers/Messaging.js","component/common/Message/ChatBox.js","assets/files/TrainerDashboard/Message/Jenny.png","assets/files/TrainerDashboard/Message/Availability Icon.svg","assets/files/TrainerDashboard/Message/Location Icon.svg","assets/files/TrainerDashboard/Message/Image 1.png","assets/files/TrainerDashboard/Message/Shedule Icon.svg"],"names":["CommonPageLoaderClass","this","props","isSpinningLoader","className","Component","component","CommonPageLoader","connect","TrainerMessage","require","state","clientData","messagingReducer","activeChannel","activeChannelMessages","typingMembers","chatClientInstance","socialMessages","individualMessages","adminMessages","allMessages","dispatch","bindActionCreators","trainerChannel","initClientDispatch","updateMessagingDetails","useState","setIndividual","setSocialGroup_list","setAdmin_list","isMessageListLoading","setMessageListLoading","useEffect","getChannelDetails","removeChatClient","then","data","individualClient","socialGroups","admins","reduxData","catch","err","Toast","type","message","PopulateContacts","channelID","members","channelData","joinChannelByID","console","log","currentChannelMembers","handleTabChange","unSubscribeChannel","isUser","parseInt","localStorage","getItem","defaultTab","tabFor","onClick","tabId","map","item","index","from","body","date_updated","lastUserProfilePic","filter","userId","getFormatDate","Date","now","isDataPresent","length","updatePersonTyping","payload","getState","identity","participant","tempMembers","currentChatItemOwner","userIdenity","currentPerson","userName","includes","MessagingActionType","UPDATE_MESSAGING_DETAILS","person","resetChannelDetails","RESET_CHANNEL_DETAILS","updateGlobalMessagingDetails","currentMesasgedChannelId","channel","sid","currentMesasge","currentMesasgeAuthor","author","tempIndividualClient","tempSocialGroup","tempAdminList","handleChannelMessage","sort","channel1","channel2","messageLeftDOMs","document","getElementsByClassName","forEach","dom","scrollTo","callback","UPDATE_CLIENT_INSTANCE","ChatClientInstance","tempChannelData","CurrentChannelData","channelId","toISOString","ChatItem","CurrentMessageComponent","currMsg","date","msgTime","moment","timestamp","format","isMyMsg","Chat","TwilioMessaging","handler","initClient","a","getToken","token","Client","create","client","INITIALIZE_CLIENT","initClientListeners","removeAllListeners","on","globalMessage","onParticipantStartTyping","onParticipantEndedTyping","updateToken","uniqueChannelId","Promise","resolve","reject","alert","isLoading","getChannelByUniqueName","joinChannel","onChanelJoined","onMessagedAdded","member","onMemberJoined","onMemberLeft","UPDATE_CHANNEL_DETAILS","channelState","status","join","getMessages","messages","tempMessage","items","UPDATE_MESSAGE_DETAILS","getIdentityToken","twilioApi","id","api","chatToken","callbackApi","ChatBoxClass","scrollToMessageListBottom","messagesEndRef","current","scrollHeight","handleChange","value","target","setState","typing","handleSendMessage","e","preventDefault","sendMessage","String","formatMessage","lastMsgDate","formattedMessage","reduce","prevMsgArray","tempPrevMsgArray","currYear","msgYear","tempMsgDate","msgDate","React","createRef","prevProps","setTimeout","tempMsg","chatTitle","src","SheduleIcon","alt","startTime","AvailabilityIcon","LocationIcon","venue","toString","ref","onSubmit","placeholder","onChange","ChatBox"],"mappings":"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","file":"static/js/18.45ecd5c5.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport \"./style.scss\";\r\n\r\nexport class CommonPageLoaderClass extends Component {\r\n  render() {\r\n    let { isSpinningLoader = false } = this.props;\r\n    return (\r\n      <>\r\n        {!isSpinningLoader ? (\r\n          <div className=\"loader\">\r\n            <div className=\"loader-circle\"></div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"lds-spinner\">\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n          </div>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\nlet component = CommonPageLoaderClass;\r\n\r\nexport const CommonPageLoader = connect(null, null)(component);\r\n","import React, { useState, useEffect, useRef, useCallback } from \"react\";\r\nimport { Tabs, Tab, TabPanel, TabList } from \"react-web-tabs\";\r\nimport \"react-web-tabs/dist/react-web-tabs.css\";\r\nimport \"./style.scss\";\r\nimport Jenny from \"../../../../assets/files/TrainerDashboard/Message/Jenny.png\";\r\nimport Jonn from \"../../../../assets/files/TrainerDashboard/Message/Image 1.png\";\r\nimport SheduleIcon from \"../../../../assets/files/TrainerDashboard/Message/Shedule Icon.svg\";\r\nimport AvailabilityIcon from \"../../../../assets/files/TrainerDashboard/Message/Availability Icon.svg\";\r\nimport LocationIcon from \"../../../../assets/files/TrainerDashboard/Message/Location Icon.svg\";\r\nimport BlueHoverButton from \"../../../common/BlueArrowButton/index\";\r\nimport { trainerChannel } from \"action/trainerAct\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { twilioApi } from \"../../../../service/apiVariables\";\r\nimport { api } from \"../../../../service/api\";\r\nimport { Toast } from \"../../../../service/toast\";\r\nimport ChatBox from \"component/common/Message/ChatBox\";\r\nimport {\r\n  initClientDispatch,\r\n  updateMessagingDetails,\r\n} from \"action/messagingAct\";\r\nimport { getFormatDate } from \"service/helperFunctions\";\r\nimport { UserAvatar } from \"component/common/UserAvatar\";\r\nimport { CommonPageLoader } from \"component/common/CommonPageLoader\";\r\nconst Chatt = require(\"twilio-chat\");\r\n\r\nconst TrainerMessageClass = ({\r\n  trainerChannel,\r\n  initClientDispatch,\r\n  clientData,\r\n  activeChannel,\r\n  activeChannelMessages,\r\n  typingMembers,\r\n  chatClientInstance,\r\n  updateMessagingDetails,\r\n  socialMessages,\r\n  individualMessages,\r\n  adminMessages,\r\n  allMessages,\r\n}) => {\r\n  const [individual_list, setIndividual] = useState([]);\r\n  const [socialGroup_list, setSocialGroup_list] = useState([]);\r\n  const [admin_list, setAdmin_list] = useState([]);\r\n  const [Channel, setChannel] = useState([]);\r\n  const [Client, setClient] = useState();\r\n  const [messages, setMessages] = useState([]);\r\n  const [text_thread, setText_thread] = useState([]);\r\n  const [chattoken, setToken] = useState(\"\");\r\n  const [channel_id, setChannel_id] = useState(\"\");\r\n  const [isMessageListLoading, setMessageListLoading] = useState(true);\r\n\r\n  // Make Id dynamic\r\n  useEffect(() => {\r\n    // Get Contact_list\r\n\r\n    initClientDispatch();\r\n\r\n    getChannelDetails();\r\n\r\n    return () => {\r\n      chatClientInstance && chatClientInstance.removeChatClient();\r\n    };\r\n  }, []);\r\n\r\n  const getChannelDetails = () => {\r\n    trainerChannel()\r\n      .then((data) => {\r\n        setIndividual(data.individualClient);\r\n        setSocialGroup_list(data.socialGroups);\r\n        setAdmin_list(data.admins);\r\n        setMessageListLoading(false);\r\n\r\n        let reduxData = {\r\n          socialMessages: [...data.socialGroups],\r\n          individualMessages: [...data.individualClient],\r\n          adminMessages: [...data.admins],\r\n          allMessages: [\r\n            ...data.individualClient,\r\n            ...data.socialGroups,\r\n            ...data.admins,\r\n          ],\r\n        };\r\n\r\n        updateMessagingDetails(reduxData);\r\n      })\r\n      .catch((err) => {\r\n        setMessageListLoading(false);\r\n        Toast({ type: \"error\", message: err.message || \"error\" });\r\n      });\r\n  };\r\n\r\n  function PopulateContacts(channelID, members, channelData) {\r\n    // console.log(channelID, chatClientInstance);\r\n\r\n    // \"CH15f50302975a435799691ca5f8d71092\";\r\n    chatClientInstance.joinChannelByID(channelID).then(() => {\r\n      console.log(\"Channel Loaded\");\r\n\r\n      let reduxData = {\r\n        currentChannelMembers: members,\r\n        channelData,\r\n      };\r\n\r\n      updateMessagingDetails(reduxData);\r\n    });\r\n  }\r\n\r\n  function handleTabChange() {\r\n    chatClientInstance && chatClientInstance.unSubscribeChannel();\r\n  }\r\n\r\n  const isUser = parseInt(localStorage.getItem(\"type\")) === 3;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"main_message_container\">\r\n        <div className=\"message_outter_container\">\r\n          <h2>Messages</h2>\r\n          <div className=\"message_inner\">\r\n            <div className=\"message_wrapper\">\r\n              <Tabs defaultTab=\"one\">\r\n                <TabList>\r\n                  <Tab tabFor=\"one\" onClick={handleTabChange}>\r\n                    All\r\n                  </Tab>\r\n                  {!isUser && (\r\n                    <Tab tabFor=\"two\" onClick={handleTabChange}>\r\n                      INDIVIDUAL CLIENTS\r\n                    </Tab>\r\n                  )}\r\n                  <Tab tabFor=\"three\" onClick={handleTabChange}>\r\n                    SOCIAL GROUPS\r\n                  </Tab>\r\n                  <Tab tabFor=\"four\" onClick={handleTabChange}>\r\n                    ADMIN\r\n                  </Tab>\r\n                </TabList>\r\n                <div className=\"message_inner\">\r\n                  <TabPanel tabId=\"one\">\r\n                    <div className=\"message_inner_one\">\r\n                      <div className=\"message_left\">\r\n                        {/* Todo Change to ALL */}\r\n                        {!isMessageListLoading ? (\r\n                          allMessages.map((item, index) => {\r\n                            const { from, body, date_updated } = item.message;\r\n\r\n                            let lastUserProfilePic =\r\n                              item[\"members\"]?.filter(\r\n                                ({ userId }) => userId === from\r\n                              )[0] ||\r\n                              item[\"members\"][0] ||\r\n                              {};\r\n\r\n                            return (\r\n                              <div\r\n                                className=\"contact_item\"\r\n                                key={`${Date.now()}_all_${index}`}\r\n                              >\r\n                                <div className=\"inner_link\">\r\n                                  {/* <img\r\n                                  src={\r\n                                    lastUserProfilePic?.profilePicture || Jenny\r\n                                  }\r\n                                  alt={`${lastUserProfilePic?.userName} profile`}\r\n                                  onError={(e) => {\r\n                                    e.target.onerror = null;\r\n                                    e.target.src = Jenny;\r\n                                  }}\r\n                                /> */}\r\n                                  {/* {JSON.stringify(lastUserProfilePic)} */}\r\n\r\n                                  <UserAvatar {...lastUserProfilePic} />\r\n\r\n                                  <div\r\n                                    className=\"message_link_notify\"\r\n                                    onClick={() =>\r\n                                      PopulateContacts(\r\n                                        item[\"channelUniqueName\"],\r\n                                        item[\"members\"],\r\n                                        item\r\n                                      )\r\n                                    }\r\n                                  >\r\n                                    <h3>{item[\"chatTitle\"] || \"\"}</h3>\r\n                                    <div>\r\n                                      {body && <p>{body}</p>}\r\n                                      {date_updated && (\r\n                                        <span className=\"msg-timestamp-left\">\r\n                                          {getFormatDate(date_updated, \"LT\")}\r\n                                        </span>\r\n                                      )}\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                            );\r\n                          })\r\n                        ) : (\r\n                          <CommonPageLoader />\r\n                        )}\r\n                      </div>\r\n                      <div className=\"message_right\">\r\n                        <ChatBox isDataPresent={allMessages?.length > 0} />\r\n                      </div>\r\n                    </div>\r\n                  </TabPanel>\r\n\r\n                  <TabPanel tabId=\"two\">\r\n                    <div className=\"message_inner_one\">\r\n                      <div className=\"message_left\">\r\n                        {/* Todo Change to ALL */}\r\n                        {!isMessageListLoading ? (\r\n                          individualMessages.map((item, index) => {\r\n                            const { from, body, date_updated } = item.message;\r\n\r\n                            let lastUserProfilePic =\r\n                              item[\"members\"]?.filter(\r\n                                ({ userId }) => userId === from\r\n                              )[0] ||\r\n                              item[\"members\"][0] ||\r\n                              {};\r\n                            return (\r\n                              <div\r\n                                className=\"contact_item\"\r\n                                key={`${Date.now()}_${index}`}\r\n                              >\r\n                                <div className=\"inner_link\">\r\n                                  {/* <img\r\n                                  src={\r\n                                    lastUserProfilePic?.profilePicture || Jenny\r\n                                  }\r\n                                  alt={`${lastUserProfilePic?.userName} profile`}\r\n                                  onError={(e) => {\r\n                                    e.target.onerror = null;\r\n                                    e.target.src = Jenny;\r\n                                  }}\r\n                                /> */}\r\n                                  <UserAvatar {...lastUserProfilePic} />\r\n                                  <div\r\n                                    className=\"message_link_notify\"\r\n                                    onClick={() =>\r\n                                      PopulateContacts(\r\n                                        item[\"channelUniqueName\"],\r\n                                        item[\"members\"],\r\n                                        item\r\n                                      )\r\n                                    }\r\n                                  >\r\n                                    <h3>{item[\"chatTitle\"] || \"\"}</h3>\r\n                                    <div>\r\n                                      {body && <p>{body}</p>}\r\n                                      {date_updated && (\r\n                                        <span className=\"msg-timestamp-left\">\r\n                                          {getFormatDate(date_updated, \"LT\")}\r\n                                        </span>\r\n                                      )}\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                            );\r\n                          })\r\n                        ) : (\r\n                          <CommonPageLoader />\r\n                        )}\r\n                      </div>\r\n                      <div className=\"message_right\">\r\n                        <ChatBox\r\n                          isDataPresent={individualMessages.length > 0}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </TabPanel>\r\n                  <TabPanel tabId=\"three\">\r\n                    <div className=\"message_inner_one\">\r\n                      <div className=\"message_left\">\r\n                        {/* Todo Change to ALL */}\r\n                        {!isMessageListLoading ? (\r\n                          socialMessages.map((item, index) => {\r\n                            const { from, body, date_updated } = item.message;\r\n\r\n                            let lastUserProfilePic =\r\n                              item[\"members\"]?.filter(\r\n                                ({ userId }) => userId === from\r\n                              )[0] ||\r\n                              item[\"members\"][0] ||\r\n                              {};\r\n                            return (\r\n                              <div\r\n                                className=\"contact_item\"\r\n                                key={`${index}_${Date.now()}`}\r\n                              >\r\n                                <div className=\"inner_link\">\r\n                                  {/* <img\r\n                                  src={\r\n                                    lastUserProfilePic?.profilePicture || Jenny\r\n                                  }\r\n                                  alt={`${lastUserProfilePic?.userName} profile`}\r\n                                  onError={(e) => {\r\n                                    e.target.onerror = null;\r\n                                    e.target.src = Jenny;\r\n                                  }}\r\n                                /> */}\r\n                                  <UserAvatar {...lastUserProfilePic} />\r\n                                  <div\r\n                                    className=\"message_link_notify\"\r\n                                    onClick={() =>\r\n                                      PopulateContacts(\r\n                                        item[\"channelUniqueName\"],\r\n                                        item[\"members\"],\r\n                                        item\r\n                                      )\r\n                                    }\r\n                                  >\r\n                                    <h3>{item[\"chatTitle\"] || \"\"}</h3>\r\n                                    <div>\r\n                                      {body && <p>{body}</p>}\r\n                                      {date_updated && (\r\n                                        <span className=\"msg-timestamp-left\">\r\n                                          {getFormatDate(date_updated, \"LT\")}\r\n                                        </span>\r\n                                      )}\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                            );\r\n                          })\r\n                        ) : (\r\n                          <CommonPageLoader />\r\n                        )}\r\n                      </div>\r\n                      <div className=\"message_right\">\r\n                        <ChatBox isDataPresent={socialMessages.length > 0} />\r\n                      </div>\r\n                    </div>\r\n                  </TabPanel>\r\n                  <TabPanel tabId=\"four\">\r\n                    <div className=\"message_inner_one\">\r\n                      <div className=\"message_left\">\r\n                        {/* Todo Change to ALL */}\r\n                        {!isMessageListLoading ? (\r\n                          adminMessages.map((item) => {\r\n                            const { from, body, date_updated } = item.message;\r\n\r\n                            let lastUserProfilePic =\r\n                              item[\"members\"]?.filter(\r\n                                ({ userId }) => userId === from\r\n                              )[0] ||\r\n                              item[\"members\"][0] ||\r\n                              {};\r\n                            return (\r\n                              <div className=\"contact_item\">\r\n                                <div className=\"inner_link\">\r\n                                  {/* <img\r\n                                  src={\r\n                                    lastUserProfilePic?.profilePicture || Jenny\r\n                                  }\r\n                                  alt={`${lastUserProfilePic?.userName} profile`}\r\n                                  onError={(e) => {\r\n                                    e.target.onerror = null;\r\n                                    e.target.src = Jenny;\r\n                                  }}\r\n                                /> */}\r\n                                  <UserAvatar {...lastUserProfilePic} />\r\n                                  <div\r\n                                    className=\"message_link_notify\"\r\n                                    onClick={() =>\r\n                                      PopulateContacts(\r\n                                        item[\"channelUniqueName\"],\r\n                                        item[\"members\"],\r\n                                        item\r\n                                      )\r\n                                    }\r\n                                  >\r\n                                    <h3>{item[\"chatTitle\"] || \"\"}</h3>\r\n                                    <div>\r\n                                      {body && <p>{body}</p>}\r\n                                      {date_updated && (\r\n                                        <span className=\"msg-timestamp-left\">\r\n                                          {getFormatDate(date_updated, \"LT\")}\r\n                                        </span>\r\n                                      )}\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                            );\r\n                          })\r\n                        ) : (\r\n                          <CommonPageLoader />\r\n                        )}\r\n                      </div>\r\n                      <div className=\"message_right\">\r\n                        <ChatBox isDataPresent={adminMessages.length > 0} />\r\n                      </div>\r\n                    </div>\r\n                  </TabPanel>\r\n                </div>\r\n              </Tabs>\r\n              <div className=\"\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\nconst RightChat = (props) => {\r\n  return (\r\n    <>\r\n      <div className=\"message_chat_right\">\r\n        <div className=\"message_text\">\r\n          <h5>{props.data}</h5>\r\n        </div>\r\n\r\n        <img src={Jonn} alt=\"icon\" />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n// const LeftChat = (props) => {\r\n//     return (\r\n//         <>\r\n//             <div className=\"message_chat_right\">\r\n//                 <div className=\"message_text\">\r\n//                     <h5>{props.data}</h5>\r\n//                 </div>\r\n\r\n//                 <img src={Jonn} alt=\"icon\" />\r\n//             </div>\r\n//         </>\r\n//     );\r\n// };\r\n\r\nconst mapStateToProps = (state) => ({\r\n  clientData: state.messagingReducer.clientData,\r\n  activeChannel: state.messagingReducer.activeChannel,\r\n  activeChannelMessages: state.messagingReducer.activeChannelMessages,\r\n  typingMembers: state.messagingReducer.typingMembers,\r\n  chatClientInstance: state.messagingReducer.chatClientInstance,\r\n  socialMessages: state.messagingReducer.socialMessages,\r\n  individualMessages: state.messagingReducer.individualMessages,\r\n  adminMessages: state.messagingReducer.adminMessages,\r\n  allMessages: state.messagingReducer.allMessages,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return bindActionCreators(\r\n    {\r\n      trainerChannel,\r\n      initClientDispatch,\r\n      updateMessagingDetails,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nconst TrainerMessage = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(TrainerMessageClass);\r\n\r\nexport default TrainerMessage;\r\n","import { MessagingActionType } from \"../service/actionType\";\r\nimport ChatClientInstance from \"../helpers/Messaging\";\r\n\r\nexport const updatePersonTyping = (payload) => (dispatch, getState) => {\r\n  const { typingMembers, currentChannelMembers } = getState().messagingReducer;\r\n  const { type, participant } = payload;\r\n  let { identity } = participant.state;\r\n  let tempMembers = typingMembers;\r\n\r\n  const currentChatItemOwner =\r\n    currentChannelMembers.filter(\r\n      ({ userIdenity }) => userIdenity === identity\r\n    )[0] || {};\r\n\r\n  let currentPerson = currentChatItemOwner?.userName || identity;\r\n\r\n  if (type === \"typingStarted\") {\r\n    // console.log(typingMembers, identity);\r\n\r\n    if (!typingMembers.includes(currentPerson)) {\r\n      tempMembers = [...typingMembers, currentPerson];\r\n\r\n      dispatch({\r\n        type: MessagingActionType.UPDATE_MESSAGING_DETAILS,\r\n        payload: { typingMembers: [...tempMembers] },\r\n      });\r\n    }\r\n  } else if (type === \"typingEnded\") {\r\n    // console.log(typingMembers, currentPerson);\r\n    if (typingMembers.includes(currentPerson)) {\r\n      tempMembers = [...typingMembers].filter(\r\n        (person) => person !== currentPerson\r\n      );\r\n      dispatch({\r\n        type: MessagingActionType.UPDATE_MESSAGING_DETAILS,\r\n        payload: { typingMembers: [...tempMembers] },\r\n      });\r\n    }\r\n  }\r\n};\r\n\r\nexport const resetChannelDetails = () => (dispatch) => {\r\n  dispatch({\r\n    type: MessagingActionType.RESET_CHANNEL_DETAILS,\r\n  });\r\n};\r\n\r\nexport const updateMessagingDetails = (payload) => (dispatch) => {\r\n  dispatch({\r\n    type: MessagingActionType.UPDATE_MESSAGING_DETAILS,\r\n    payload,\r\n  });\r\n};\r\n\r\nexport const updateGlobalMessagingDetails = (message) => (\r\n  dispatch,\r\n  getState\r\n) => {\r\n  const currentMesasgedChannelId = message?.channel?.sid;\r\n  const currentMesasge = message?.state?.body;\r\n  const currentMesasgeAuthor = message?.state?.author;\r\n  const {\r\n    individualMessages,\r\n    socialMessages,\r\n    adminMessages,\r\n  } = getState().messagingReducer;\r\n\r\n  let tempIndividualClient = [...individualMessages];\r\n  let tempSocialGroup = [...socialMessages];\r\n  let tempAdminList = [...adminMessages];\r\n  const currentIndividualChannel = handleChannelMessage(\r\n    tempIndividualClient,\r\n    currentMesasgedChannelId,\r\n    currentMesasge,\r\n    currentMesasgeAuthor\r\n  );\r\n  const currentSocialChannel = handleChannelMessage(\r\n    tempSocialGroup,\r\n    currentMesasgedChannelId,\r\n    currentMesasge,\r\n    currentMesasgeAuthor\r\n  );\r\n  const currentAdminChannel = handleChannelMessage(\r\n    tempAdminList,\r\n    currentMesasgedChannelId,\r\n    currentMesasge,\r\n    currentMesasgeAuthor\r\n  );\r\n\r\n  let currentAllChannel = [\r\n    ...individualMessages,\r\n    ...socialMessages,\r\n    ...adminMessages,\r\n  ].sort((channel1, channel2) => {\r\n    return (\r\n      new Date(channel2?.message?.date_updated || 1950) -\r\n      new Date(channel1?.message?.date_updated || 1950)\r\n    );\r\n  });\r\n\r\n  let payload = {\r\n    individualMessages: currentIndividualChannel,\r\n    socialMessages: currentSocialChannel,\r\n    adminMessages: currentAdminChannel,\r\n    allMessages: currentAllChannel,\r\n  };\r\n\r\n  let messageLeftDOMs = document.getElementsByClassName(\"message_left\");\r\n  [...messageLeftDOMs]?.forEach((dom) => dom?.scrollTo(0, 0));\r\n  dispatch({\r\n    type: MessagingActionType.UPDATE_MESSAGING_DETAILS,\r\n    payload,\r\n  });\r\n};\r\n\r\nexport const initClientDispatch = (callback) => (dispatch, getState) => {\r\n  dispatch({\r\n    type: MessagingActionType.UPDATE_CLIENT_INSTANCE,\r\n    payload: new ChatClientInstance(dispatch, getState, callback),\r\n  });\r\n};\r\n\r\nconst handleChannelMessage = (\r\n  channelData,\r\n  currentMesasgedChannelId,\r\n  currentMesasge,\r\n  author\r\n) => {\r\n  let tempChannelData = [...channelData].map((data) => {\r\n    let CurrentChannelData = { ...data };\r\n\r\n    if (data?.channelId === currentMesasgedChannelId) {\r\n      CurrentChannelData[\"message\"][\"body\"] = currentMesasge;\r\n      CurrentChannelData[\"message\"][\"date_updated\"] = new Date().toISOString();\r\n      CurrentChannelData[\"message\"][\"from\"] = author;\r\n    }\r\n\r\n    return { ...CurrentChannelData };\r\n  });\r\n\r\n  // console.log(tempChannelData, channelData);\r\n\r\n  tempChannelData = tempChannelData.sort((channel1, channel2) => {\r\n    return (\r\n      new Date(channel2?.message?.date_updated || 1950) -\r\n      new Date(channel1?.message?.date_updated || 1950)\r\n    );\r\n  });\r\n\r\n  return [...tempChannelData];\r\n};\r\n","import React from \"react\";\r\nimport moment from \"moment\";\r\n\r\nimport Jonn from \"../../../assets/files/TrainerDashboard/Message/Image 1.png\";\r\nimport { UserAvatar } from \"../UserAvatar\";\r\n\r\nexport const ChatItem = ({\r\n  currentChannelMembers = [],\r\n  currMsg: { type, state, date },\r\n}) => {\r\n  let CurrentMessageComponent;\r\n\r\n  if (type === \"message\") {\r\n    let msgCreatedDate = moment(state.timestamp);\r\n\r\n    let msgTime = msgCreatedDate.format(\"LT\");\r\n\r\n    const isMyMsg = state?.author === localStorage.getItem(\"user-id\");\r\n\r\n    const currentChatItemOwner =\r\n      currentChannelMembers.filter(\r\n        ({ userIdenity }) => userIdenity === state.author\r\n      )[0] || {};\r\n\r\n    CurrentMessageComponent = (\r\n      <div className={`message_chat_${isMyMsg ? \"right\" : \"left\"}`}>\r\n        <div className=\"message_text\">\r\n          <h5>{state?.body || \"\"}</h5>\r\n          <span className=\"msg-time\">{msgTime}</span>\r\n        </div>\r\n\r\n        <UserAvatar {...currentChatItemOwner} />\r\n\r\n        {/* <img\r\n          src={currentChatItemOwner?.profilePicture || Jonn}\r\n          alt=\"icon\"\r\n          onError={(e) => {\r\n            e.target.onerror = null;\r\n            e.target.src = Jonn;\r\n          }}\r\n        /> */}\r\n      </div>\r\n    );\r\n  } else {\r\n    CurrentMessageComponent = (\r\n      <div className=\"w-100 d-flex align-items-center justify-content-center my-3\">\r\n        <span className=\"info-badge\">{date}</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <div>{CurrentMessageComponent}</div>;\r\n};\r\n","// import config from \"../../config\";\r\n\r\nimport { MessagingActionType } from \"../service/actionType\";\r\nimport { twilioApi } from \"../service/apiVariables\";\r\nimport { api } from \"../service/api\";\r\nimport { Toast } from \"../service/toast\";\r\nimport {\r\n  updatePersonTyping,\r\n  resetChannelDetails,\r\n  updateGlobalMessagingDetails,\r\n} from \"../action/messagingAct\";\r\n\r\nconst Chat = require(\"twilio-chat\");\r\n\r\nexport default class TwilioMessaging {\r\n  constructor(handler, getState, callback) {\r\n    this.getState = getState;\r\n\r\n    this.handler = handler;\r\n\r\n    this.activeChannel = null;\r\n\r\n    this.client = null;\r\n\r\n    this.callbackApi = callback;\r\n\r\n    this.initClient();\r\n  }\r\n\r\n  initClient = async () => {\r\n    const token = await this.getToken();\r\n\r\n    const client = await Chat.Client.create(token);\r\n\r\n    this.client = client;\r\n\r\n    this.handler({\r\n      type: MessagingActionType.INITIALIZE_CLIENT,\r\n      payload: client,\r\n    });\r\n\r\n    this.initClientListeners(client);\r\n  };\r\n\r\n  initClientListeners = (client) => {\r\n    // REMOVE ALL THE EXISTING LISTENERS\r\n    client.removeAllListeners();\r\n\r\n    // client.on(\"channelJoined\", async (channel) => {\r\n    //   // getting list of all messages since this is an existing channel\r\n    //   console.log(channel);\r\n\r\n    //   await this.onChanelJoined(channel);\r\n    // });\r\n\r\n    // LISTEN FOR GLOBAL MESSAGES\r\n\r\n    client.on(\"messageAdded\", async (message) => {\r\n      this.globalMessage(message);\r\n    });\r\n\r\n    // LISTEN FOR PERSON WHOSE ARE TYPING\r\n    client.on(\"typingStarted\", (participant) => {\r\n      this.onParticipantStartTyping(participant);\r\n    });\r\n\r\n    // LISTEN FOR PERSON WHOM HAVE STOP TYPING\r\n    client.on(\"typingEnded\", (participant) => {\r\n      this.onParticipantEndedTyping(participant);\r\n    });\r\n\r\n    //LISTEN AND UPDATE IF TOKEN IS ABOUT TO EXPIRE\r\n\r\n    client.on(\"tokenAboutToExpire\", async () => {\r\n      this.log(\"token is about to expire\");\r\n      const token = await this.getToken();\r\n      client.updateToken(token);\r\n    });\r\n\r\n    // LISTEN IF ALREADY TOKEN HAS EXPIRED\r\n\r\n    client.on(\"tokenExpired\", async () => {\r\n      this.log(\"token is about to expire\");\r\n      const token = await this.getToken();\r\n      client.updateToken(token);\r\n    });\r\n  };\r\n\r\n  globalMessage = (message) => {\r\n    updateGlobalMessagingDetails(message)(this.handler, this.getState);\r\n  };\r\n\r\n  joinChannelByID = async (uniqueChannelId) => {\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        this.unSubscribeChannel();\r\n        if (!this.client) return alert(\"Twilio loading\");\r\n\r\n        this.handler({\r\n          type: MessagingActionType.UPDATE_MESSAGING_DETAILS,\r\n          payload: { isLoading: true },\r\n        });\r\n\r\n        this.log(`Attempting to join ${uniqueChannelId} channel`);\r\n\r\n        const channel = await this.client.getChannelByUniqueName(\r\n          uniqueChannelId\r\n        );\r\n        await this.joinChannel(channel);\r\n\r\n        await this.onChanelJoined(channel);\r\n\r\n        this.log(`Channel joined`);\r\n\r\n        this.activeChannel = channel;\r\n\r\n        // LISTEN ON CHANNEL MESSAGE ADDED\r\n\r\n        channel.on(\"messageAdded\", async (message) => {\r\n          await this.onMessagedAdded(message);\r\n        });\r\n\r\n        // LISTEN FOR PERSON WHOSE ARE TYPING\r\n        channel.on(\"typingStarted\", (participant) => {\r\n          this.onParticipantStartTyping(participant);\r\n        });\r\n\r\n        // LISTEN FOR PERSON WHOM HAVE STOP TYPING\r\n        channel.on(\"typingEnded\", (participant) => {\r\n          this.onParticipantEndedTyping(participant);\r\n        });\r\n\r\n        // WHEN A MEMBER JOINED\r\n\r\n        channel.on(\"memberJoined\", (member) => {\r\n          this.onMemberJoined(member);\r\n        });\r\n\r\n        // WHEN A MEMBER LEFT\r\n        channel.on(\"memberLeft\", (member) => {\r\n          this.onMemberLeft(member);\r\n        });\r\n\r\n        this.handler({\r\n          type: MessagingActionType.UPDATE_CHANNEL_DETAILS,\r\n          payload: channel,\r\n        });\r\n        resolve(true);\r\n      } catch (err) {\r\n        this.log(`Not able to join the channel`);\r\n        reject(err);\r\n      }\r\n    });\r\n  };\r\n\r\n  joinChannel = async (channel) => {\r\n    if (channel.channelState.status !== \"joined\") {\r\n      await channel.join();\r\n    }\r\n  };\r\n\r\n  // FUNC FIRES WHEN USER JOINED IN A CHANNEL\r\n\r\n  onChanelJoined = async (channel) => {\r\n    const messages = await channel.getMessages();\r\n\r\n    let tempMessage = messages.items || [];\r\n\r\n    this.handler({\r\n      type: MessagingActionType.UPDATE_MESSAGING_DETAILS,\r\n      payload: {\r\n        activeChannelMessages: [...tempMessage],\r\n        isLoading: false,\r\n      },\r\n    });\r\n  };\r\n\r\n  // FUNC FIRES WHEN USER RECIVES MESSAGE\r\n\r\n  onMessagedAdded = (message) => {\r\n    const { channel } = message;\r\n    if (channel.sid !== this.activeChannel.sid) {\r\n      console.log(message, \"msg\", \"diff channel\");\r\n      return {};\r\n    } else {\r\n      return this.handler({\r\n        type: MessagingActionType.UPDATE_MESSAGE_DETAILS,\r\n        payload: message,\r\n      });\r\n    }\r\n  };\r\n\r\n  // WHEN PERSON STARTS TYPING THIS FUNC FIRES\r\n\r\n  onParticipantStartTyping = (participant) => {\r\n    let payload = {\r\n      type: \"typingStarted\",\r\n      participant,\r\n    };\r\n    updatePersonTyping(payload)(this.handler, this.getState);\r\n  };\r\n\r\n  // WHEN PERSON STOPS TYPING THIS FUNC FIRES\r\n\r\n  onParticipantEndedTyping = (participant) => {\r\n    let payload = {\r\n      type: \"typingEnded\",\r\n      participant,\r\n    };\r\n    updatePersonTyping(payload)(this.handler, this.getState);\r\n  };\r\n\r\n  // WHEN NEW PERSON JOINS THE ROOM THIS FUNC FIRES\r\n\r\n  onMemberJoined = (member) => {\r\n    const { state } = member;\r\n\r\n    const { identity } = state;\r\n\r\n    this.log(`${identity} has joined the chat`);\r\n\r\n    return this.handler({\r\n      type: MessagingActionType.UPDATE_MESSAGING_DETAILS,\r\n      payload: {\r\n        status: `${identity} has joined the chat`,\r\n      },\r\n    });\r\n  };\r\n\r\n  // WHEN A PERSON LEFT THE ROOM THIS FUNC FIRES\r\n\r\n  onMemberLeft = (member) => {\r\n    const { state } = member;\r\n\r\n    const { identity } = state;\r\n\r\n    this.log(`${identity} has left the chat`);\r\n\r\n    return this.handler({\r\n      type: MessagingActionType.UPDATE_MESSAGING_DETAILS,\r\n      payload: {\r\n        status: `${identity} has left the chat`,\r\n      },\r\n    });\r\n  };\r\n\r\n  getToken = () => {\r\n    const { getIdentityToken } = twilioApi;\r\n\r\n    getIdentityToken.id = localStorage.getItem(\"user-id\");\r\n\r\n    return new Promise((resolve, reject) => {\r\n      api({ ...getIdentityToken })\r\n        .then(({ chatToken }) => {\r\n          //   console.log(chatToken);\r\n          resolve(chatToken);\r\n        })\r\n        .catch((err) => {\r\n          Toast({ type: \"error\", message: err.message || \"Error\" });\r\n          reject(err);\r\n        });\r\n    });\r\n  };\r\n\r\n  // REMOVE THE LISTENERS FROM THE ACTIVE CHANNEL\r\n\r\n  unSubscribeChannel() {\r\n    if (this.activeChannel) {\r\n      this.activeChannel.removeAllListeners();\r\n      this.activeChannel = null;\r\n      this.log(\"Un subscribed from the channel\");\r\n    }\r\n    resetChannelDetails()(this.handler);\r\n  }\r\n\r\n  // REMOVE CHAT CLIENT\r\n\r\n  removeChatClient() {\r\n    if (this.client) {\r\n      this.client.removeAllListeners();\r\n      this.client = null;\r\n      this.handler({\r\n        type: MessagingActionType.UPDATE_MESSAGING_DETAILS,\r\n        payload: { clientData: null },\r\n      });\r\n      this.unSubscribeChannel();\r\n      this.log(\"chat client removed\");\r\n    }\r\n  }\r\n\r\n  log(message) {\r\n    console.log(`---------${message}------`);\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\n\r\nimport LocationIcon from \"../../../assets/files/TrainerDashboard/Message/Location Icon.svg\";\r\nimport SheduleIcon from \"../../../assets/files/TrainerDashboard/Message/Shedule Icon.svg\";\r\nimport AvailabilityIcon from \"../../../assets/files/TrainerDashboard/Message/Availability Icon.svg\";\r\nimport BlueHoverButton from \"../BlueArrowButton\";\r\n\r\nimport { ChatItem } from \"./ChatItem\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { trainerChannel } from \"action/trainerAct\";\r\nimport { connect } from \"react-redux\";\r\nimport { getFormatDate } from \"service/helperFunctions\";\r\n\r\nclass ChatBoxClass extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.messagesEndRef = React.createRef();\r\n    this.state = {\r\n      message: \"\",\r\n    };\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    // console.log(this.props, prevProps);\r\n    if (\r\n      this.props.activeChannelMessages.length !==\r\n      prevProps.activeChannelMessages.length\r\n    ) {\r\n      this.scrollToMessageListBottom();\r\n      // console.log(\"hrllo\");\r\n    }\r\n    if (this.props.isLoading === false && prevProps.isLoading === true) {\r\n      setTimeout(() => {\r\n        this.scrollToMessageListBottom();\r\n        // console.log(\"hrllo\", this.props.isLoading, prevProps.isLoading);\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.scrollToMessageListBottom();\r\n  }\r\n\r\n  scrollToMessageListBottom = () => {\r\n    this.messagesEndRef.current?.scrollTo(\r\n      0,\r\n      this.messagesEndRef.current?.scrollHeight\r\n    );\r\n  };\r\n\r\n  handleChange = ({ target: { value } }) => {\r\n    const { activeChannel } = this.props;\r\n\r\n    this.setState({\r\n      message: value,\r\n    });\r\n    activeChannel && activeChannel.typing();\r\n  };\r\n\r\n  handleSendMessage = (e) => {\r\n    e.preventDefault();\r\n    const { message } = this.state;\r\n\r\n    const { activeChannel } = this.props;\r\n\r\n    if (!activeChannel) {\r\n      return console.log(\"Chat Service is not configured.\");\r\n    }\r\n\r\n    if (activeChannel) {\r\n      activeChannel.sendMessage(String(message)).then(() => {\r\n        this.setState({\r\n          message: \"\",\r\n        });\r\n        this.scrollToMessageListBottom();\r\n      });\r\n    }\r\n  };\r\n\r\n  formatMessage = (messages = []) => {\r\n    var lastMsgDate = \"\";\r\n    let formattedMessage = messages.reduce((prevMsgArray, currMsg) => {\r\n      let tempPrevMsgArray = [...prevMsgArray];\r\n\r\n      const { timestamp } = currMsg.state;\r\n\r\n      let currYear = getFormatDate(null, \"YYYY\");\r\n\r\n      let msgYear = getFormatDate(timestamp, \"YYYY\");\r\n\r\n      let tempMsgDate = getFormatDate(timestamp, \"MMMM DD\");\r\n\r\n      let msgDate =\r\n        currYear === msgYear ? tempMsgDate : `${tempMsgDate}, ${msgYear}`;\r\n\r\n      if (lastMsgDate === msgDate) {\r\n        tempPrevMsgArray = [\r\n          ...tempPrevMsgArray,\r\n          { type: \"message\", ...currMsg },\r\n        ];\r\n      } else {\r\n        lastMsgDate = msgDate;\r\n        tempPrevMsgArray = [\r\n          ...tempPrevMsgArray,\r\n          { type: \"timestamp\", date: msgDate },\r\n          { type: \"message\", ...currMsg },\r\n        ];\r\n      }\r\n\r\n      return tempPrevMsgArray;\r\n    }, []);\r\n\r\n    return formattedMessage;\r\n  };\r\n  render() {\r\n    const {\r\n      activeChannelMessages = [],\r\n      typingMembers = [],\r\n      currentChannelMembers = [],\r\n      isLoading = false,\r\n      activeChannel = {},\r\n      channelData = {},\r\n      isDataPresent = false,\r\n    } = this.props;\r\n\r\n    const { message } = this.state;\r\n\r\n    const tempMsg = this.formatMessage(activeChannelMessages);\r\n\r\n    const messages = activeChannelMessages;\r\n\r\n    if (!isDataPresent)\r\n      return (\r\n        <div className=\"w-100 h-100 d-flex align-items-center justify-content-center\">\r\n          {!isLoading ? <h3>No People</h3> : \"\"}\r\n        </div>\r\n      );\r\n    return (\r\n      <div className=\"message_right_chatarea\">\r\n        {activeChannel?.sid ? (\r\n          <>\r\n            {!isLoading ? (\r\n              <>\r\n                <div className=\"message_right_header\">\r\n                  <h2>{channelData?.chatTitle || \"Title\"}</h2>\r\n                  <div className=\"message_header_times\">\r\n                    <div className=\"message_header_items\">\r\n                      <img src={SheduleIcon} alt=\"icon\" />\r\n                      <h5>\r\n                        {getFormatDate(\r\n                          channelData?.startTime,\r\n                          \"ddd MMM DD YYYY\",\r\n                          true\r\n                        )}\r\n                      </h5>\r\n                    </div>\r\n                    <div className=\"message_header_items\">\r\n                      <img src={AvailabilityIcon} alt=\"icon\" />\r\n                      <h5>\r\n                        {getFormatDate(channelData?.startTime, \"hh:mm A\", true)}\r\n                      </h5>\r\n                    </div>\r\n                    <div className=\"message_header_items\">\r\n                      <img src={LocationIcon} alt=\"icon\" />\r\n                      <h5>{channelData?.venue}</h5>\r\n                    </div>\r\n                  </div>\r\n                  <p>\r\n                    {typingMembers.length > 0 && (\r\n                      <span className=\"ml-auto text-primary fw-600\">{`${typingMembers.toString()} ${\r\n                        typingMembers.length > 1 ? \"are\" : \"is\"\r\n                      } typing...`}</span>\r\n                    )}\r\n                  </p>\r\n                </div>\r\n                <div\r\n                  className=\"message_right_textarea\"\r\n                  ref={this.messagesEndRef}\r\n                >\r\n                  {tempMsg?.length > 0 ? (\r\n                    tempMsg.map((item, index) => {\r\n                      return (\r\n                        <ChatItem\r\n                          item={item}\r\n                          currentChannelMembers={currentChannelMembers}\r\n                          key={`${Date.now()}_${index}`}\r\n                          currMsg={item}\r\n                        />\r\n                      );\r\n                    })\r\n                  ) : (\r\n                    <div className=\"w-100 h-100 d-flex align-items-center justify-content-center\">\r\n                      <span className=\"info-badge\">No message</span>\r\n                    </div>\r\n                  )}\r\n                  <div id=\"end-message\" />\r\n                </div>\r\n                <form className=\"w-100\" onSubmit={this.handleSendMessage}>\r\n                  <div className=\"message_right_input\">\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Type your message here..\"\r\n                      value={message}\r\n                      onChange={this.handleChange}\r\n                    />\r\n                    <div className=\"submit-btn-block\">\r\n                      <button className=\"transparent-btn\">\r\n                        <BlueHoverButton />\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </form>\r\n              </>\r\n            ) : (\r\n              <div className=\"w-100 h-100 d-flex align-items-center justify-content-center\">\r\n                <span className=\"info-badge\">{`${\r\n                  isLoading ? \"Loading...\" : \"Connecting...\"\r\n                }`}</span>\r\n              </div>\r\n            )}\r\n          </>\r\n        ) : (\r\n          <div className=\"w-100 h-100 d-flex align-items-center justify-content-center\">\r\n            <span className=\"info-badge\">{`${\r\n              isLoading ? \"Loading...\" : \"Select a chat to start messaging\"\r\n            }`}</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  clientData: state.messagingReducer.clientData,\r\n  activeChannel: state.messagingReducer.activeChannel,\r\n  activeChannelMessages: state.messagingReducer.activeChannelMessages,\r\n  typingMembers: state.messagingReducer.typingMembers,\r\n  chatClientInstance: state.messagingReducer.chatClientInstance,\r\n  currentChannelMembers: state.messagingReducer.currentChannelMembers,\r\n  isLoading: state.messagingReducer.isLoading,\r\n  channelData: state.messagingReducer.channelData,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return bindActionCreators(\r\n    {\r\n      trainerChannel,\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nconst ChatBox = connect(mapStateToProps, mapDispatchToProps)(ChatBoxClass);\r\n\r\nexport default ChatBox;\r\n","export default __webpack_public_path__ + \"static/media/Jenny.c50273b9.png\";","export default __webpack_public_path__ + \"static/media/Availability Icon.ad0517cb.svg\";","export default __webpack_public_path__ + \"static/media/Location Icon.cbb0b32d.svg\";","export default __webpack_public_path__ + \"static/media/Image 1.5667afc3.png\";","export default __webpack_public_path__ + \"static/media/Shedule Icon.7b9fb7aa.svg\";"],"sourceRoot":""}