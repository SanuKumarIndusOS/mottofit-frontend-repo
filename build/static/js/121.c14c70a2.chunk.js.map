{"version":3,"sources":["HOC/LoaderWrapper.js"],"names":["defaultProps","page","filter","search","LoaderWrapper","WrappedComponent","props","state","loading","componentAPIprops","getComponentProps","isLoading","componentProps","loaderKey","every","key","callActions","this","then","data","setState","compProp","className","Component","history","location","query","convertStringToObject","Promise","resolve","reject","all","actions","map","action","handler","match","params","initialLoad","getDirectPropsRelatedData","catch","index","Boolean","reduce","acc","propIndex","propsKey"],"mappings":"wNAGIA,EAAe,CACfC,KAAM,EAAGC,OAAQ,GAAIC,OAAQ,IAIpBC,EAAgB,SAAAC,GAEzB,OAAO,SAAAC,GAEH,yDAEI,WAAYA,GAAQ,IAAD,8BACf,cAAMA,IAGVC,MAAQ,CACJC,SAAS,EACTC,kBAAkB,IANH,EAsBnBC,kBAAoB,WAChB,OAAO,2BAAI,EAAKJ,OAAS,EAAKC,MAAME,oBAvBrB,EAwCnBE,UAAY,WAAgBC,GACxB,OAD2C,EAAhCC,UACMC,OAAM,SAACC,GAAD,MAAiC,KAAxBH,EAAeG,OAzChC,EAFvB,sDAWI,WAAsB,IAAD,OAEjBC,EAAYV,EAAOW,KAAKX,OAAOY,MAAK,SAACC,GAC5Bb,EAAMO,WACP,EAAKO,SAAS,CACVZ,SAAS,EACTC,kBAAkBU,SAjBtC,uCA4BI,SAA0BE,GAClBf,EAAMO,WAEFI,KAAKN,UAAUL,EAAOe,IACtBJ,KAAKG,SAAS,CACVZ,SAAS,MAjC7B,oBA+CI,WAMI,OAHkBS,KAAKV,MAAjBC,QAME,qBAAKc,UAAU,cAAf,SACI,qBAAKA,UAAU,gCAAf,SACI,qBAAKA,UAAU,sBAQvB,mCACI,cAACjB,EAAD,eAAsBY,KAAKP,4BAnE/C,GAA0Ba,eAiF5BP,EAAc,SAACV,EAAOM,GAExB,MAAiDA,EAA3CY,eAAN,MAAgB,CAAEC,SAAU,CAAEtB,OAAQ,KAAtC,EAEIuB,EAAQC,gCAAsBH,EAAQC,SAAStB,QAEnD,OAAO,IAAIyB,SAAQ,SAACC,EAASC,GAEzBF,QAAQG,IAAIzB,EAAM0B,QAAQC,KAAI,SAACC,GAE3B,MAAqB,kBAAXA,GAAqBA,EAAOC,QAE/BD,EAAOC,QAAP,uCAAmBnC,GAAiBY,EAAewB,MAAQxB,EAAewB,MAAMC,OAAS,IAAzF,IAA6FC,aAAa,EAAMF,MAAOxB,EAAewB,OAAUV,IAIhJd,EAAesB,GAAf,uCAA2BlC,GAAiBY,EAAewB,MAAQxB,EAAewB,MAAMC,OAAS,IAAjG,IAAqGC,aAAa,EAAMF,MAAOxB,EAAewB,OAAUV,QAE/JR,MAAK,SAACC,GACNU,EAAQU,EAA0BpB,EAAKb,EAAM0B,aAC9CQ,OAAM,SAACrB,GAENU,GAAQ,UAQdU,EAA4B,SAACpB,EAAKa,GAUpC,OARiBA,EAAQC,KAAI,SAACC,EAAOO,GACjC,QAAmB,kBAATP,IAAqBA,EAAOC,UAC3BM,KAGZvC,OAAOwC,SAGQC,QAAO,SAACC,EAAIC,GAM1B,OAFAD,EAFiBZ,EAAQa,GAAWC,UAElB3B,EAAK0B,GAEhBD,IACT","file":"static/js/121.c14c70a2.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport { convertStringToObject } from \"service/helperFunctions\"\n\nlet defaultProps = {\n    page: 1, filter: '', search: ''\n}\n\n\nexport const LoaderWrapper = WrappedComponent => {\n\n    return props => {\n\n        return class Temp extends Component {\n\n            constructor(props) {\n                super(props)\n            }\n\n            state = {\n                loading: true,\n                componentAPIprops:{}\n            }\n\n            componentWillMount() {\n\n                callActions(props, this.props).then((data) => {\n                    if (!props.loaderKey) {\n                        this.setState({\n                            loading: false,\n                            componentAPIprops:data\n                        })\n                    }\n\n                })\n            }\n\n            getComponentProps = () => {\n                return {...this.props,...this.state.componentAPIprops}\n            }\n\n            componentWillReceiveProps(compProp) {\n                if (props.loaderKey) {\n\n                    if (this.isLoading(props, compProp)) {\n                        this.setState({\n                            loading: false\n                        })\n                    }\n\n                }\n\n\n            }\n\n            isLoading = ({ loaderKey }, componentProps) => {\n                return loaderKey.every((key) => componentProps[key] !== '')\n            }       \n\n\n            render() {\n\n\n                let { loading } = this.state\n\n\n                if (loading) {\n                    //loader\n                    return (\n                        <div className=\"page-loader\">\n                            <div className=\"position-relative w-100 h-100\">\n                                <div className=\"loader-circle\"></div>\n                            </div>\n                        </div>\n\n                    )\n                } else {\n\n                    return (\n                        <>\n                            <WrappedComponent {...this.getComponentProps()} />\n\n                        </>\n                    )\n\n\n                }\n\n            }\n\n        }\n    }\n}\n//handling api call\nconst callActions = (props, componentProps) => {\n\n    let { history = { location: { search: '' } } } = componentProps\n\n    let query = convertStringToObject(history.location.search)   \n\n    return new Promise((resolve, reject) => {\n\n        Promise.all(props.actions.map((action) => {  \n            \n            if(typeof action === 'object'&&action.handler){\n                \n            return action.handler({...defaultProps, ...componentProps.match ? componentProps.match.params : {}, initialLoad: true, match: componentProps.match, ...query })\n\n            }   \n\n            return componentProps[action]({...defaultProps, ...componentProps.match ? componentProps.match.params : {}, initialLoad: true, match: componentProps.match, ...query })\n\n        })).then((data) => {\n            resolve(getDirectPropsRelatedData(data,props.actions))\n        }).catch((data) => {\n\n            resolve(true)\n\n        })\n\n    })\n\n}\n\nconst getDirectPropsRelatedData = (data,actions) =>{\n\n    let propsIndex = actions.map((action,index)=>{\n        if(typeof action==='object' && action.handler){\n            return index\n        }\n        return false \n    }).filter(Boolean)\n\n\n    return propsIndex.reduce((acc,propIndex)=>{\n\n        let propsLabel = actions[propIndex].propsKey\n\n        acc[propsLabel] = data[propIndex]\n\n        return acc\n    },{})\n\n}"],"sourceRoot":""}