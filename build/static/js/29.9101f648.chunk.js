(this.webpackJsonpmotto=this.webpackJsonpmotto||[]).push([[29,292,387,388,483],{213:function(e,t,s){"use strict";s.r(t);var n=s(60),i=s(109),a=s(36),c=s(5),o=s(11),l=s(2),r=s.n(l),d=(s(668),s(817)),j=(s(815),s(468)),u=s(473),b=s(67),v=s(471),O=s(68),h=s(7),m=s(268),p=s.n(m),x=s(43),f=s(30),g=s(25),S=s(111),N=s(38),_=s(112),D=s(6),w=s(47),y=s(78),T=s(19),P=s(1),C=function(e){var t=e.tabname,s=e.tabData,i=e.prevData,a=e.cancelSessionApi,d=e.invitationApi,v=e.handleChange,m=void 0===v?{}:v,x=e.isDefaultCardPresent,f=e.handlePagination,g=(e.pageSize,e.documentSize),_=Object(n.a)(e,["tabname","tabData","prevData","cancelSessionApi","invitationApi","handleChange","isDefaultCardPresent","handlePagination","pageSize","documentSize"]),D=Object(l.useState)([10]),y=Object(o.a)(D,2),T=(y[0],y[1],Object(l.useState)(!1)),C=Object(o.a)(T,2),I=C[0],F=C[1],U=function(e,t,s){var n={sessionId:e,acceptance:t};if(F(!0),!x&&t&&!s){var i={currentAcceptedInvitationId:e};return null===_||void 0===_||_.updateUserDetails(i),h.history.push({pathname:"/users/dashboard/settings/profile"}),Object(N.Toast)({type:"info",message:"User needs to add default card to proceed futher"})}d(n).then((function(){F(!1),m(),Object(N.Toast)({type:"success",message:"success"})})).catch((function(e){F(!1),Object(N.Toast)({type:"error",message:e.message||"Error"})}))},z=function(e){var t="".concat(window.location.host),s="".concat(window.location.protocol),n="".concat(s,"//").concat(t,"/").concat("trainer/profile/").concat(e);e&&window.open(n)};return Object(P.jsxs)("div",{className:"tabPanel_overview",children:[Object(P.jsx)("div",{className:"tabPanel_overview_left",children:Object(P.jsxs)("div",{className:"TP_overview_wrapper",children:[Object(P.jsxs)("h3",{style:{textTransform:"capitalize"},children:[t," Sessions"]}),Object(P.jsxs)("div",{className:"TP_US_overview",children:[Object(P.jsx)("div",{className:"TP_US_overview_inner",children:s.length>0?null===s||void 0===s?void 0:s.map((function(e,s){var n,i=p()(p.a.tz("America/New_York").format("YYYY MM DD HH:MM")).isAfter(p.a.tz(e.sessionStartTime,"America/New_York").format("YYYY MM DD HH:MM"));return Object(P.jsxs)(r.a.Fragment,{children:[Object(P.jsxs)("div",{className:"TP_upcomeSession_overview",children:[Object(P.jsx)("div",{className:"TP_USession_dates",children:Object(P.jsxs)("h4",{children:[e.sessionDate.substr(8,2),Object(P.jsx)("span",{children:A[e.sessionDate.substr(5,2)]})]})}),Object(P.jsxs)("div",{className:"TP_USession_data",children:[Object(P.jsxs)("h2",{style:{textTransform:"capitalize"},children:[null===e||void 0===e?void 0:e.activity,"\xa0",Object(P.jsx)("span",{style:{textTransform:"lowerCase"},children:"with"})," ","\xa0",Object(P.jsx)("h2",{style:{textTransform:"capitalize"},children:null===e||void 0===e||null===(n=e.trainerDetail)||void 0===n?void 0:n.firstName})]}),Object(P.jsxs)("div",{className:"TP_USession_data_icons",children:[Object(P.jsxs)("h5",{children:[Object(P.jsx)("img",{src:j.default,alt:"icon"}),Object(S.getFormatDate)(e.sessionStartTime,"LT",!0)]}),Object(P.jsxs)("h5",{children:[Object(P.jsx)("img",{src:u.default,alt:"icon"}),((null===e||void 0===e?void 0:e.venue.charAt(0).toUpperCase())+(null===e||void 0===e?void 0:e.venue.slice(1))).replace(/([A-Z])/g," $1").trim()]})]}),"OnGoing"!==t&&Object(P.jsxs)("div",{className:"TP_USession_data_buttons",children:["Invited"===t?Object(P.jsxs)(P.Fragment,{children:[i?Object(P.jsx)("div",{children:"Expired Session"}):Object(P.jsx)(P.Fragment,{children:e.acceptance?Object(P.jsx)(P.Fragment,{children:Object(P.jsx)("span",{className:"text-black mr-4",children:"completed"===e.sessionStatus?Object(P.jsx)("div",{style:{color:"red"},children:Object(P.jsx)("u",{children:"Completed"})}):"cancelled"===e.sessionStatus?Object(P.jsx)("div",{style:{color:"red"},children:Object(P.jsx)("u",{children:"Cancelled"})}):Object(P.jsx)("div",{children:" Invited session"})})}):Object(P.jsx)(P.Fragment,{children:"cancelled"!==e.sessionStatus?Object(P.jsx)(P.Fragment,{children:"Previous"!==t?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("button",{disabled:I,onClick:function(){return U(e.id,!1)},children:"Decline"}),Object(P.jsx)("button",{disabled:I,onClick:function(){return U(e.id,!0,e.paidByUser)},className:"text-success",children:"Accept"})]}):null}):"completed"===e.sessionStatus?Object(P.jsx)("div",{style:{color:"red"},children:Object(P.jsx)("u",{children:"Completed"})}):"cancelled"===e.sessionStatus?Object(P.jsx)("div",{style:{color:"red"},children:Object(P.jsx)("u",{children:"Cancelled"})}):Object(P.jsx)("div",{children:" Invited session"})})}),Object(P.jsx)("button",{disabled:I,onClick:function(){return z(e.trainerId)},className:"text-primary",children:"View Trainer"})]}):Object(P.jsx)(P.Fragment,{children:"completed"===e.sessionStatus?Object(P.jsx)("button",{className:"text-primary",disabled:!0,children:"Completed"}):Object(P.jsx)(P.Fragment,{children:e.asFriend?Object(P.jsxs)("div",{className:"d-flex align-items-center",children:[Object(P.jsx)("span",{className:"text-black mr-4",children:"Invited session"}),Object(P.jsx)("button",{disabled:I,onClick:function(){return z(e.trainerId)},className:"text-primary",children:"View Trainer"})]}):Object(P.jsx)(P.Fragment,{children:"cancelled"!==e.sessionStatus?Object(P.jsx)(P.Fragment,{children:"Previous"!==t?Object(P.jsx)("button",{disabled:I,onClick:function(){return function(e){var t={sessionId:e,sessionStatus:"cancelled"};F(!0),console.log(e),a(t).then((function(e){F(!1),Object(N.Toast)({type:"success",message:(null===e||void 0===e?void 0:e.message)||"success"}),m()})).catch((function(e){F(!1),console.log(e)}))}(e.id)},children:"Cancel"}):""}):Object(P.jsx)("button",{className:"text-danger",disabled:!0,children:"Cancelled"})})})}),0===(null===e||void 0===e?void 0:e.participantsCount)?"1on1"!==e.trainingType&&!e.asFriend&&"Previous"!==t&&Object(P.jsxs)("div",{className:"button_boarder",children:[Object(P.jsxs)("button",{onClick:function(){return function(e){var t="";"social"===e.trainingType?t="SOCIAL SESSION":"class"===e.trainingType?t="CREATE A CLASS":"1on1"===e.trainingType&&(t="1 ON 1 TRAINING");var s={location:{label:(null===e||void 0===e?void 0:e.city)||"",value:(null===e||void 0===e?void 0:e.city)||""},trainingVenue:{label:"clientLocation"===e.venue?"Your Location":"Trainer's Location",value:(null===e||void 0===e?void 0:e.venue)||""},preferedTrainingMode:(null===e||void 0===e?void 0:e.sessionType)||"",price:e.price||"",sessionType:t||"",trainingType:{label:(null===e||void 0===e?void 0:e.activity)||"",value:(null===e||void 0===e?void 0:e.activity)||""}},n={bookingData:{start_slot:e.sessionStartTime,end_slot:e.sessionEndTime,date:e.sessionDate},sessionData:s,selectedTrainerData:Object(c.a)({},e.trainerDetail),submittedData:Object(c.a)({},e)};null===_||void 0===_||_.updateUserDetails(n),h.history.push({pathname:"/user/with-friends"})}(e)},children:["Add Friends"," "]}),Object(P.jsx)("img",{src:O.default,alt:"icon"})]}):null]})]})]}),Object(P.jsx)("hr",{})]},s)})):Object(P.jsx)("h3",{className:"my-5 py-5 text-center",children:"No  ".concat(t," Session")})}),(null===s||void 0===s?void 0:s.length)<g&&Object(P.jsxs)("button",{onClick:f,className:"viewMoreButton",children:["View all Session ",Object(P.jsx)(b.default,{})]})]})]})}),Object(P.jsx)("div",{className:"tabPanel_overview_right",children:Object(P.jsx)("div",{className:"TB_overview_right",children:Object(P.jsx)("div",{className:"TB_overview_row_two",children:Object(P.jsxs)("div",{className:"row_two_data",children:[Object(P.jsx)("h2",{children:"PREVIOUS SESSIONS"}),Object(P.jsx)("div",{className:"row_two_scroll",children:null===i||void 0===i?void 0:i.map((function(e,t){var s,n,i,a,o,l,r,d={profilePicture:null===e||void 0===e||null===(s=e.trainerDetail)||void 0===s?void 0:s.profilePicture,userName:"".concat((null===e||void 0===e||null===(n=e.trainerDetail)||void 0===n?void 0:n.firstName)||""," ").concat((null===e||void 0===e||null===(i=e.trainerDetail)||void 0===i?void 0:i.lastName)||"")};return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)("div",{className:"row_previous_data",children:[Object(P.jsx)("div",{className:"row_previous_avater ml-2",children:Object(P.jsx)(w.UserAvatar,Object(c.a)(Object(c.a)({},d),{},{className:"img-md-2"}))}),Object(P.jsxs)("div",{className:"row_previous_header",children:[Object(P.jsxs)("h2",{className:"d-flex flex-wrap",style:{textTransform:"capitalize"},children:[e.activity,"\xa0",Object(P.jsx)("span",{style:{textTransform:"lowerCase"},children:"with"})," ","\xa0",Object(P.jsx)("h2",{className:"d-flex flex-wrap",style:{textTransform:"capitalize"},children:null===e||void 0===e||null===(a=e.trainerDetail)||void 0===a?void 0:a.firstName})]}),Object(P.jsx)("p",{children:"".concat(null===e||void 0===e||null===(o=e.sessionDate)||void 0===o?void 0:o.substr(8,2)," ").concat(A[null===e||void 0===e||null===(l=e.sessionDate)||void 0===l?void 0:l.substr(5,2)]," ").concat(null===e||void 0===e||null===(r=e.sessionDate)||void 0===r?void 0:r.substr(0,4))})]})]},t),Object(P.jsx)("hr",{})]})}))})]})})})})]})},A=(j.default,u.default,v.default,j.default,u.default,v.default,j.default,u.default,v.default,j.default,u.default,v.default,j.default,u.default,v.default,{"01":"Jan","02":"Feb","03":"Mar","04":"Apr","05":"May","06":"Jun","07":"Jul","08":"Aug","09":"Sep",10:"Oct",11:"Nov",12:"Dec"}),I=Object(f.b)(null,(function(e){return Object(g.b)({userSession:x.userSession,cancelSession:x.cancelSession,invitationSession:x.invitationSession,updateUserDetails:x.updateUserDetails},e)}))((function(e){var t,s=r.a.useState({upcomingSessions:[],pastSessions:[],onGoingSessions:[],invitedSessions:[]}),n=Object(o.a)(s,2),j=n[0],u=n[1],b=Object(l.useState)({upcoming:0,past:0,invited:0}),v=Object(o.a)(b,2),O=v[0],h=v[1],m=Object(l.useState)({upcoming:0,past:0,invited:0}),p=Object(o.a)(m,2),x=p[0],f=p[1],g=Object(l.useState)(!1),S=Object(o.a)(g,2),w=S[0],A=S[1],I=Object(l.useState)(!0),F=Object(o.a)(I,2),U=F[0],z=F[1],M=Object(l.useState)("upcoming"),k=Object(o.a)(M,2),E=k[0],Y=k[1],L=Object(T.g)();Object(l.useEffect)((function(){var e;G(),window.scrollTo(0,0),"invite"===(null===(e=L.state)||void 0===e?void 0:e.from)&&J("invited")}),[]);var J=function(t){var s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.userSession(t,O[E]).then((function(e){var n=e.data,o=e.documentCount,l=n||[],r=o||0,d={invited:"invitedSessions",upcoming:"upcomingSessions",past:"pastSessions"};f((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(a.a)({},t,r))})),u((function(e){var n=[].concat(Object(i.a)(e[d[t]]),Object(i.a)(l));return Object(c.a)(Object(c.a)({},e),{},Object(a.a)({},d[t],s?n:Object(i.a)(l)))})),z(!1)})).catch((function(e){Object(N.Toast)({type:"error",message:e.message||"Error"}),z(!1)}))},G=function(){var e=D.PaymentApi.getPaymentMethods;Object(_.api)(Object(c.a)({},e)).then((function(e){var t=(e.data[0]||{}).default;A(t)}))},V=function(){h((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(a.a)({},E,e[E]+1||0))}))};return Object(l.useEffect)((function(){J(E,!0)}),[O]),Object(P.jsx)("div",{className:"outter_user_container",children:Object(P.jsx)("div",{className:"container",children:Object(P.jsxs)("div",{className:"inner_user_container ",children:[Object(P.jsx)("div",{className:"userSession_heading",children:Object(P.jsx)("h2",{children:"My Session"})}),Object(P.jsx)("div",{className:"US_tabs_wrapper",children:Object(P.jsxs)(d.d,{defaultTab:"invite"===(null===(t=L.state)||void 0===t?void 0:t.from)?"invited":"upcoming",onChange:function(e){!function(e,t){var s={invited:"invitedSessions",upcoming:"upcomingSessions",past:"pastSessions"}[e];Y(e),u((function(t){var n;return(null===(n=t[s])||void 0===n?void 0:n.length)>0||(z(!0),J(e)),t}))}(e)},children:[Object(P.jsxs)(d.b,{children:[Object(P.jsx)(d.a,{tabFor:"upcoming",children:"Upcoming"}),Object(P.jsx)(d.a,{tabFor:"invited",children:"Invited"}),Object(P.jsx)(d.a,{tabFor:"past",children:"Previous"})]}),Object(P.jsx)("div",{className:"tabPanel_outter",children:Object(P.jsx)(d.c,{tabId:"invited",children:U?Object(P.jsx)(y.CommonPageLoader,{}):Object(P.jsx)(C,Object(c.a)({tabname:"Invited",tabData:j.invitedSessions,prevData:j.pastSessions,cancelSessionApi:e.cancelSession,invitationApi:e.invitationSession,handleChange:function(){return J("invited")},isDefaultCardPresent:w,handlePagination:V,pageSize:O.invited,documentSize:x.invited},e))})}),Object(P.jsx)("div",{className:"tabPanel_outter",children:Object(P.jsx)(d.c,{tabId:"upcoming",children:U?Object(P.jsx)(y.CommonPageLoader,{}):Object(P.jsx)(C,Object(c.a)({tabname:"Upcoming",tabData:j.upcomingSessions,prevData:j.pastSessions,cancelSessionApi:e.cancelSession,handleChange:function(){return J("upcoming")},handlePagination:V,pageSize:O.upcoming,documentSize:x.upcoming},e))})}),Object(P.jsx)("div",{className:"tabPanel_outter",children:Object(P.jsx)(d.c,{tabId:"pass",children:Object(P.jsx)(C,Object(c.a)({tabname:"Moto Pass",tabData:j.pastSessions,prevData:j.pastSessions,cancelSessionApi:e.cancelSession,handleChange:function(){return J()}},e))})}),Object(P.jsx)("div",{className:"tabPanel_outter",children:Object(P.jsx)(d.c,{tabId:"past",children:U?Object(P.jsx)(y.CommonPageLoader,{}):Object(P.jsx)(C,Object(c.a)({tabname:"Previous",tabData:j.pastSessions,prevData:j.pastSessions,cancelSessionApi:e.cancelSession,handleChange:function(){return J("past")},handlePagination:V,pageSize:O.past,documentSize:x.past},e))})}),Object(P.jsx)("div",{className:"tabPanel_outter",children:Object(P.jsx)(d.c,{tabId:"ongoing",children:Object(P.jsx)(C,Object(c.a)({tabname:"OnGoing",tabData:j.onGoingSessions,prevData:j.pastSessions,cancelSessionApi:e.cancelSession,handleChange:function(){return J()},handlePagination:V},e))})})]})})]})})})}));t.default=I},468:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/Availability Icon.ad0517cb.svg"},471:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/Jenny.c50273b9.png"},473:function(e,t,s){"use strict";s.r(t),t.default=s.p+"static/media/Location Icon.cbb0b32d.svg"},668:function(e,t,s){}}]);