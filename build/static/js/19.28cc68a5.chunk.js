(this.webpackJsonpmotto=this.webpackJsonpmotto||[]).push([[19,283],{340:function(e,t,n){"use strict";n.r(t);var a=n(5),c=n(36),s=n(14),i=n.n(s),r=n(28),l=n(11),o=n(2),d=n(869),j=(n(536),n(110)),u=n(9),b=n(6),m=n(112),p=n(43),h=n(25),x=n(30),O=n(38),f=n(987),v=n.n(f),y=n(7),g=(n(67),n(921)),N=n(1);var C=Object(x.b)((function(e){return{sessionData:e.userReducer.sessionData}}),(function(e){return Object(h.b)({updateUserDetails:p.updateUserDetails},e)}))((function(e){var t,n,s,p=e.updateUserDetails,h=e.agreedToTerms,x=e.checkPayAhead,f=e.handleChange,C=e.handleChangeCPA,k=e.handleFriendsCount,S=e.ScheduleSession,_=e.sessionData,P=e.mottoPassDataVal,E=e.isValidationPassed,w=void 0===E?function(){}:E,D=e.isProfile,T=void 0!==D&&D,A=Object(d.useStripe)(),F=Object(d.useElements)(),M=(Object(o.useMemo)((function(){return{style:{base:{color:"#424770",letterSpacing:"0.025em",fontFamily:"Source Code Pro, monospace","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})),Object(o.useState)(!1)),R=Object(l.a)(M,2),z=R[0],I=R[1],B=Object(o.useState)({}),V=Object(l.a)(B,2),L=V[0],U=V[1],H=Object(o.useState)(!0),J=Object(l.a)(H,2),G=J[0],q=J[1],K=Object(o.useState)(!1),Q=Object(l.a)(K,2),W=Q[0],X=Q[1];Object(o.useEffect)((function(){$()}),[]);var Y=function(){var e=Object(r.a)(i.a.mark((function e(t){var n,a,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!T||w()){e.next=3;break}return e.abrupt("return");case 3:if(G){e.next=5;break}return e.abrupt("return",S());case 5:if(A&&F){e.next=7;break}return e.abrupt("return");case 7:return n=F.getElement(d.CardNumberElement),X(!0),e.next=11,A.createPaymentMethod({type:"card",card:n});case 11:if(a=e.sent,c=a.error,s=a.paymentMethod,!c){e.next=19;break}return X(!1),e.abrupt("return",Object(O.Toast)({type:"error",message:c.message||"Error"}));case 19:console.log("[PaymentMethod]",s);case 20:A.createToken(n).then((function(e){var t=e.token;(null===t||void 0===t?void 0:t.id)&&Z(null===t||void 0===t?void 0:t.id)})).catch((function(e){X(!1),Object(O.Toast)({type:"error",message:e.message||"Error"})}));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(e){var t=b.PaymentApi.addCardDetails,n={cardToken:e,setDefault:!!T||z};t.body=n,Object(m.api)(Object(a.a)({},t)).then((function(e){var t;e.data;if(Object(O.Toast)({type:"success",message:"Card details added"}),$(),T)return S((function(){return X(!1)}));var n=(t={},Object(c.a)(t,"1 ON 1 TRAINING",(function(){return S()})),Object(c.a)(t,"SOCIAL SESSION",(function(){return y.history.push("/user/with-friends")})),Object(c.a)(t,"CREATE A CLASS",(function(){return y.history.push("/user/with-friends")})),t),a=null===_||void 0===_?void 0:_.sessionType;a&&n[a]&&S((function(){return X(!1)}))})).catch((function(e){X(!1),Object(O.Toast)({type:"error",message:e.message||"Error"}),console.log(e)}))},$=function(){var e=b.PaymentApi.getPaymentMethods;Object(m.api)(Object(a.a)({},e)).then((function(e){var t=e.data,n=((void 0===t?[]:t)||[]).filter((function(e){return e.default}));if(n.length>0){U(n[0]),q(!1);var a={defaulCardDetails:n[0]};p(a)}})).catch((function(e){Object(O.Toast)({type:"error",message:e.message||"Error"})}))};return Object(N.jsx)("div",{children:Object(N.jsxs)("form",{onSubmit:Y,className:"Card",children:[P&&"availPass"in P?Object(N.jsx)("div",{style:{marginTop:"20px",marginBottom:"20px"},children:Object(N.jsxs)("h3",{children:["Remaing Passes: ",P.availPass[0].remains]})}):Object(N.jsxs)("div",{children:[" ",Object(N.jsxs)("div",{className:"payment_input_inner",children:[Object(N.jsx)("label",{className:"card-detail",children:"Card Number"}),G?Object(N.jsx)(d.CardNumberElement,{options:{hidePostalCode:!0,style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#898989",fontFamily:"Montserrat",fontSize:"16px"},border:"2px solid #BCBCBC !important",borderRadius:"30px",opacity:"1",maxHeight:"45px",height:"100%",minHeight:"45px"},invalid:{color:"#9e2146"}}}}):Object(N.jsx)("p",{className:"fs-20",children:"**** **** **** ".concat((null===L||void 0===L||null===(t=L.card)||void 0===t?void 0:t.last4)||"****")}),Object(N.jsxs)("div",{className:"payment_expire_input",children:[Object(N.jsxs)("div",{className:"payment_expire_inner",children:[Object(N.jsx)("label",{className:"card-detail",children:"Expiry Date"}),G?Object(N.jsx)(d.CardExpiryElement,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#898989",fontFamily:"Montserrat",fontSize:"16px"}},invalid:{color:"#9e2146"}}}}):Object(N.jsx)("p",{className:"fs-20",children:"".concat((null===L||void 0===L||null===(n=L.card)||void 0===n?void 0:n.exp_month)||"","/").concat((null===L||void 0===L||null===(s=L.card)||void 0===s?void 0:s.exp_year)||"")})]}),Object(N.jsx)("div",{className:"payment_expire_inner",children:G&&Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("label",{className:"card-detail",children:"CVC/CVV"}),Object(N.jsx)(d.CardCvcElement,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#898989",fontFamily:"Montserrat",fontSize:"16px"}},invalid:{color:"#9e2146"}}}})]})})]}),L.default&&Object(N.jsx)(N.Fragment,{children:G?Object(N.jsx)("div",{className:"payment_change d-flex justify-content-end",children:Object(N.jsx)("button",{className:"link-btn",onClick:function(e){q(!1),e.preventDefault()},type:"click",children:"Reset Card"})}):Object(N.jsx)("div",{className:"payment_change d-flex justify-content-end",children:Object(N.jsx)("button",{className:"link-btn",onClick:function(e){q(!0),e.preventDefault()},type:"click",children:"Edit Card"})})}),G&&Object(N.jsxs)("div",{className:"payment_input_check mt-3 d-flex justify-content-between",children:[!T&&Object(N.jsxs)("div",{className:"payment_check_inner",children:[Object(N.jsx)("input",{type:"checkbox",checked:z,onChange:function(){return I(!z)},id:"remember_card"}),Object(N.jsx)("label",{for:"remember_card",children:"Remember My Card Details"})]}),Object(N.jsx)("div",{className:"payment_check_inner d-flex align-items-center",children:Object(N.jsx)(u.a,{to:"/",className:"fw-600 text-underline",children:"Session Cancellation Policy"})})]})]})]}),Object(N.jsx)("div",{className:"payment_input_outter_check ",children:Object(N.jsxs)("div",{className:"payment_terms",children:[Object(N.jsx)("input",{type:"checkbox",style:{width:"50px",marginRight:"10px"},onChange:f,checked:h}),Object(N.jsxs)("label",{children:["By proceeding, you accept the latest versions of our"," ",Object(N.jsx)(u.a,{to:"/",children:"Terms of Use"})," and"," ",Object(N.jsx)(u.a,{to:"/",children:"Privacy Policy"})]})]})}),"SOCIAL SESSION"===(null===_||void 0===_?void 0:_.sessionType)?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"payment_input_outter_check ",children:Object(N.jsxs)("div",{className:"payment_terms",children:[Object(N.jsx)("input",{type:"checkbox",style:{width:"50px",marginRight:"10px"},onChange:C,checked:x}),Object(N.jsx)("label",{className:"my-0",children:"I will pay for the entire social session"})]})}),Object(N.jsx)("div",{className:"mb-3 mt-2",children:Object(N.jsx)("div",{className:"col-12 d-flex justify-content-end",children:x?Object(N.jsxs)("select",{className:"participants",onChange:function(e){console.log(e.target.value),k(e.target.value)},children:[Object(N.jsx)("option",{value:"1",children:"1 Participants"}),Object(N.jsx)("option",{value:"2",children:"2 Participants"}),Object(N.jsx)("option",{value:"3",children:"3 Participants"})]}):null})})]}):null,Object(N.jsx)("div",{className:"disclaimer",children:Object(N.jsxs)("p",{className:"text-info d-flex alignn-items-center",children:[Object(N.jsx)(v.a,{}),Object(N.jsx)("span",{className:"ml-2",children:"Payment will happen only after the session is completed."})]})}),Object(N.jsx)("div",{className:"submit",children:Object(N.jsx)("button",{type:"click",className:"".concat(h?"":"disable-btn"," ").concat(T?"w-auto":""),disabled:!h||W,onClick:Y,children:W?Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("span",{className:"d-flex align-items-center justify-content-around w-100",children:["Loading"," ",Object(N.jsx)(g.a,{style:{fontSize:"14px",height:"28px",width:"28px"}})]})}):Object(N.jsxs)(N.Fragment,{children:["".concat(T?"Save Changes":"Continue")," ",Object(N.jsx)(j.default,{})]})})})]})})}));t.default=C},536:function(e,t,n){}}]);